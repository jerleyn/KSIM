## Комп'ютерні системи імітаційного моделювання

## СПм-24-2

### Лабораторна робота **№3**. Використання засобів обчислювального інтелекту для оптимізації імітаційних моделей

### Варіант 11, модель у середовищі NetLogo:

[Autumn](http://www.netlogoweb.org/launch#http://www.netlogoweb.org/assets/modelslib/Sample%20Models/Biology/Autumn.nlogo)

### Вербальний опис моделі:

Модель Autumn імітує осінній листопад, моделюючи зміну забарвлення та опадання листя під впливом погодних факторів. Для оптимізації обрано задачу: знайти такий набір параметрів середовища, при якому максимальна кількість листя залишається живою протягом усієї симуляції.

### Внутрішні параметри:

- **water-level** — рівень вологи у листку.
- **sugar-level** — вміст цукру в листку.
- **attachedness** — ступінь міцності з'єднання листка з гілкою.
- **chlorophyll** — рівень хлорофілу (зелений пігмент).
- **carotene** — рівень каротину (жовтий пігмент).
- **anthocyanin** — рівень антоціану (червоний пігмент).
- **bottom-line** — координата поверхні землі.
- **evaporation-temp** — температура випаровування (30 °C).

### Керуючі параметри:

- **number-of-leaves** — початкова кількість листя.
- **start-sugar-mean** — середнє значення початкового вмісту цукру.
- **start-sugar-stddev** — стандартне відхилення початкового вмісту цукру.
- **temperature** — температура навколишнього середовища (°C).
- **rain-intensity** — інтенсивність дощу.
- **wind-factor** — сила вітру.
- **sun-intensity** — інтенсивність сонячного світла (%).

### Показники роботи системи:

- **Leaves** — кількість живих і мертвих листків.
- **Weather conditions** — погодні умови.
- **Leaf averages** — середні значення пігментів, води, цукру та міцності кріплення.

---

### Налаштування середовища BehaviorSearch:

**Обрана модель**:
/NetLogo/models/Sample Models/Biology/Autumn.nlogo

**Параметри моделі** (вкладка Model):

<pre>
["number-of-leaves" 600]
["wind-factor" [0 1 10]]
["temperature" [5 1 35]]
["rain-intensity" [0 1 25]]
["sun-intensity" [10 5 100]]
["start-sugar-mean" [10 5 90]]
["start-sugar-stddev" 20]
</pre>

Фіксовані параметри: `number-of-leaves = 600` та `start-sugar-stddev = 20` — для зменшення розмірності простору пошуку.

**Використовувана міра**:
Для фітнес-функції обрано **кількість живого листя**, оскільки задача — знайти умови, при яких листя максимально довго залишається на дереві:

<pre>count leaves</pre>

За цим показником визначаються оптимальні погодні умови для збереження листя.

Ефективність збереження листя оцінюється **в середньому** за весь період симуляції тривалістю **80 тактів**, починаючи з 0 такту.

Параметр зупинки за умовою (**Stop if**) не використовувався.

**Загальний вигляд вкладки налаштувань параметрів моделі:**
![Вкладка налаштувань параметрів моделі](bs_parameters.jpg)

**Налаштування цільової функції** (вкладка Search Objective):

Мета: знайти параметри, при яких **максимальна кількість листя залишається живою** → **Goal: Maximize Fitness**.

**Collected measure**: **MEAN_ACROSS_STEPS** — середнє значення кількості живого листя за всю симуляцію (80 тактів).

Для зменшення впливу стохастичності кожна симуляція повторюється **8 разів**, результуюче значення — **середнє арифметичне**.

Загальний вигляд вкладки:
![Вкладка налаштувань цільової функції](bs_objective.jpg)

**Налаштування алгоритму пошуку** (вкладка Search Algorithm):

Використано два алгоритми:
1. **StandardGA** (простий генетичний алгоритм) — розмір популяції 30, 150 прогонів, одноточковий кросовер, ймовірність мутації 5 %.
2. **RandomSearch** (випадковий пошук) — 150 випадкових комбінацій параметрів.

**Загальний вигляд вкладки:**
![Вкладка налаштувань алгоритму пошуку](bs_search.jpg)

---

### Результати використання BehaviorSearch:

**Діалогове вікно запуску пошуку:**
![Вікно запуску](bs_dialog.jpg)

**Результат генетичного алгоритму:**
![Результати ГА](bs_result_ga.jpg)

Найкращий результат ГА: `count leaves ≈ 578` (середнє за 80 тактів).
Знайдені параметри:
- wind-factor = 1
- temperature = 21
- rain-intensity = 17
- sun-intensity = 55
- start-sugar-mean = 65

**Результат випадкового пошуку:**
![Результати випадкового пошуку](bs_result_random.jpg)

Найкращий результат випадкового пошуку: `count leaves ≈ 521`.
Знайдені параметри:
- wind-factor = 2
- temperature = 19
- rain-intensity = 12
- sun-intensity = 45
- start-sugar-mean = 70

---

### Аналіз результатів:

**Генетичний алгоритм** знайшов суттєво кращий результат (578 vs 521 живих листків у середньому). Графік fitness показує характерну еволюційну динаміку — поступове покращення з кількома "стрибками" на приблизно 30, 70 та 110 прогонах, коли алгоритм знаходив вдалі комбінації.

ГА виявив ключові закономірності:
- **Мінімальний вітер** (wind-factor = 1) — головний фактор збереження листя.
- **Помірна температура** (~21 °C) — достатня для підтримки хлорофілу та запобігання випаровуванню.
- **Достатній дощ** (rain-intensity = 17) — забезпечує постійне надходження води.
- **Помірне сонце** (~55 %) — достатньо для фотосинтезу, але не руйнує хлорофіл (порог руйнування > 75 %).

**Випадковий пошук** не зміг одночасно оптимізувати всі параметри. Він знайшов непоганий wind-factor = 2, але інші параметри (rain-intensity = 12, sun-intensity = 45) виявились неоптимальними — недостатній дощ та сонце.

---

### Тестування в NetLogo

Параметри, знайдені генетичним алгоритмом, було перевірено у NetLogo. Результат підтвердився: при знайдених значеннях листя зберігається значно довше, ніж при параметрах за замовчуванням.

![Тестування параметрів ГА в NetLogo](bs_test_netlogo.jpg)

**Висновок:** генетичний алгоритм ефективніше знайшов оптимальну комбінацію параметрів, оскільки він "навчається" на попередніх поколіннях — комбінує вдалі значення різних параметрів у нащадках. Випадковий пошук не використовує цю інформацію і покладається виключно на удачу.
